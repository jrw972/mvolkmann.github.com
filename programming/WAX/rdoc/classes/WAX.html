<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: WAX</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">WAX</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/wax_rb.html">
                lib/wax.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Object.html">
                Object
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This class provides methods that make outputting XML easy, fast and
efficient in terms of memory utilization.
</p>
<p>
A <a href="WAX.html">WAX</a> object should not be used from multiple
threads!
</p>
<p>
For more information, see <a
href="http://www.ociweb.com/wax">www.ociweb.com/wax</a>.
</p>
<p>
Copyright 2008 R. Mark Volkmann This file is part of <a
href="WAX.html">WAX</a>.
</p>
<p>
<a href="WAX.html">WAX</a> is free software. You can redistribute it and/or
modify it under the terms of the GNU Lesser General Public License as
published by the Free Software Foundation, either version 3 of the License,
or (at your option) any later version.
</p>
<p>
<a href="WAX.html">WAX</a> is distributed in the hope that it will be
useful, but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser
General Public License for more details.
</p>
<p>
You should have received a copy of the GNU Lesser General Public License
along with <a href="WAX.html">WAX</a>. If not, see <a
href="http://www.gnu.org/licenses">www.gnu.org/licenses</a>.
</p>
<ol>
<li type="A">Mark Volkmann, <a href="Object.html">Object</a> Computing, Inc.

</li>
</ol>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000004">attr</a>&nbsp;&nbsp;
      <a href="#M000005">blank_line</a>&nbsp;&nbsp;
      <a href="#M000006">cdata</a>&nbsp;&nbsp;
      <a href="#M000007">child</a>&nbsp;&nbsp;
      <a href="#M000008">close</a>&nbsp;&nbsp;
      <a href="#M000009">comment</a>&nbsp;&nbsp;
      <a href="#M000010">commented_start</a>&nbsp;&nbsp;
      <a href="#M000011">dtd</a>&nbsp;&nbsp;
      <a href="#M000012">end!</a>&nbsp;&nbsp;
      <a href="#M000013">entity_def</a>&nbsp;&nbsp;
      <a href="#M000014">external_entity_def</a>&nbsp;&nbsp;
      <a href="#M000015">get_cr</a>&nbsp;&nbsp;
      <a href="#M000016">get_indent</a>&nbsp;&nbsp;
      <a href="#M000017">is_trust_me</a>&nbsp;&nbsp;
      <a href="#M000018">namespace</a>&nbsp;&nbsp;
      <a href="#M000003">new</a>&nbsp;&nbsp;
      <a href="#M000019">nl_text</a>&nbsp;&nbsp;
      <a href="#M000020">no_indents_or_crs</a>&nbsp;&nbsp;
      <a href="#M000021">out</a>&nbsp;&nbsp;
      <a href="#M000022">processing_instruction</a>&nbsp;&nbsp;
      <a href="#M000023">set_indent</a>&nbsp;&nbsp;
      <a href="#M000024">set_trust_me</a>&nbsp;&nbsp;
      <a href="#M000025">start</a>&nbsp;&nbsp;
      <a href="#M000026">text</a>&nbsp;&nbsp;
      <a href="#M000027">use_non_windows_cr</a>&nbsp;&nbsp;
      <a href="#M000028">use_windows_cr</a>&nbsp;&nbsp;
      <a href="#M000001">write</a>&nbsp;&nbsp;
      <a href="#M000002">write</a>&nbsp;&nbsp;
      <a href="#M000029">xslt</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">STATES</td>
          <td>=</td>
          <td class="context-item-value">[:in_prolog, :in_start_tag, :in_element, :after_root]</td>
          <td width="3em">&nbsp;</td>
          <td class="context-item-desc">
The current state of XML output is used to verify that methods in this
class aren&#8216;t called in an illogical order. If they are, a
RuntimeError is raised.

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">NONWINDOWS_CR</td>
          <td>=</td>
          <td class="context-item-value">&quot;\n&quot;</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">WINDOWS_CR</td>
          <td>=</td>
          <td class="context-item-value">&quot;\r\n&quot;</td>
        </tr>
        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">state</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="WAX.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000003.html');return false;">
          <span class="method-name">new</span><span class="method-args">(writer=$stdout, version=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Initializes <a href="WAX.html#M000003">new</a> instances of this class.
</p>
        </div>
      </div>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="WAX.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000001.html');return false;">
          <span class="method-name">write</span><span class="method-args">(writer=$stdout, version=nil, &amp;proc)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="WAX.html">WAX</a> object, invokes the specified block on
it and calls <a href="WAX.html#M000008">close</a> on the <a
href="WAX.html">WAX</a> object. The writer can be a String file path, an IO
object such as a File, or unspecified to <a href="WAX.html#M000021">out</a>
$stdout. If the version isn&#8216;t specified then no XML declaration will
be written.
</p>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="WAX.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000004.html');return false;">
          <span class="method-name">attr</span><span class="method-args">(p1, p2, p3=nil, p4=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes an attribute for the currently open element <a
href="WAX.html#M000025">start</a> tag. If two parameters are specified,
they are name and value. If three parameters are specified, they are
prefix, name and value. If four parameters are specified, they are prefix,
name, value and a flag to indicate whether the attribute should be written
on a <a href="WAX.html#M000003">new</a> line.
</p>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="WAX.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000005.html');return false;">
          <span class="method-name">blank_line</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a blank line to increase readability of the XML.
</p>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="WAX.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000006.html');return false;">
          <span class="method-name">cdata</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a CDATA section in the content of the current element.
</p>
        </div>
      </div>

      <div id="method-M000007" class="method-detail">
        <a name="M000007"></a>

        <div class="method-heading">
          <a href="WAX.src/M000007.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000007.html');return false;">
          <span class="method-name">child</span><span class="method-args">(p1, p2, p3=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
A convenience method that is a shortcut for <a
href="WAX.html#M000025">start</a>(prefix, name).<a
href="WAX.html#M000026">text</a>(<a href="WAX.html#M000026">text</a>).<a
href="WAX.html#M000012">end!</a>().
</p>
        </div>
      </div>

      <div id="method-M000008" class="method-detail">
        <a name="M000008"></a>

        <div class="method-heading">
          <a href="WAX.src/M000008.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000008.html');return false;">
          <span class="method-name">close</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Terminates all unterminated elements, closes the Writer that is being used
to output XML, and insures that nothing else can be written.
</p>
        </div>
      </div>

      <div id="method-M000009" class="method-detail">
        <a name="M000009"></a>

        <div class="method-heading">
          <a href="WAX.src/M000009.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000009.html');return false;">
          <span class="method-name">comment</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a <a href="WAX.html#M000009">comment</a> (&amp;lt;!&#8212; <a
href="WAX.html#M000026">text</a> &#8212;&amp;gt;). The <a
href="WAX.html#M000009">comment</a> <a href="WAX.html#M000026">text</a>
cannot contain &quot;&#8212;&quot;.
</p>
        </div>
      </div>

      <div id="method-M000010" class="method-detail">
        <a name="M000010"></a>

        <div class="method-heading">
          <a href="WAX.src/M000010.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000010.html');return false;">
          <span class="method-name">commented_start</span><span class="method-args">(p1, p2=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a commented <a href="WAX.html#M000025">start</a> tag for a given
element name, but doesn&#8216;t terminate it.
</p>
        </div>
      </div>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="WAX.src/M000011.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000011.html');return false;">
          <span class="method-name">dtd</span><span class="method-args">(file_path)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a DOCTYPE that associates a DTD with the XML document.
</p>
        </div>
      </div>

      <div id="method-M000012" class="method-detail">
        <a name="M000012"></a>

        <div class="method-heading">
          <a href="WAX.src/M000012.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000012.html');return false;">
          <span class="method-name">end!</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Terminates the current element. It does so in the shorthand way (/&amp;gt;)
if the element has no content, and in the long way (&amp;lt;/name&amp;gt;)
if it does. The name of this method ends in ! because end is a keyword in
Ruby.
</p>
        </div>
      </div>

      <div id="method-M000013" class="method-detail">
        <a name="M000013"></a>

        <div class="method-heading">
          <a href="WAX.src/M000013.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000013.html');return false;">
          <span class="method-name">entity_def</span><span class="method-args">(name, value)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds an entity definition to the internal subset of the DOCTYPE.
</p>
        </div>
      </div>

      <div id="method-M000014" class="method-detail">
        <a name="M000014"></a>

        <div class="method-heading">
          <a href="WAX.src/M000014.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000014.html');return false;">
          <span class="method-name">external_entity_def</span><span class="method-args">(name, file_path)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Adds an external entity definition to the internal subset of the DOCTYPE.
</p>
        </div>
      </div>

      <div id="method-M000015" class="method-detail">
        <a name="M000015"></a>

        <div class="method-heading">
          <a href="WAX.src/M000015.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000015.html');return false;">
          <span class="method-name">get_cr</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the carriage return characters currently being used.
</p>
        </div>
      </div>

      <div id="method-M000016" class="method-detail">
        <a name="M000016"></a>

        <div class="method-heading">
          <a href="WAX.src/M000016.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000016.html');return false;">
          <span class="method-name">get_indent</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets the indentation characters being used.
</p>
        </div>
      </div>

      <div id="method-M000017" class="method-detail">
        <a name="M000017"></a>

        <div class="method-heading">
          <a href="WAX.src/M000017.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000017.html');return false;">
          <span class="method-name">is_trust_me</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets whether &quot;trust me&quot; mode is enabled.
</p>
        </div>
      </div>

      <div id="method-M000018" class="method-detail">
        <a name="M000018"></a>

        <div class="method-heading">
          <a href="WAX.src/M000018.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000018.html');return false;">
          <span class="method-name">namespace</span><span class="method-args">(p1, p2=nil, p3=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a <a href="WAX.html#M000018">namespace</a> declaration in the <a
href="WAX.html#M000025">start</a> tag of the current element. If one
parameter is specified, it is the default <a
href="WAX.html#M000018">namespace</a> uri. If two parameters are specified,
they are prefix and uri. If three parameters are specified, they are
prefix, uri and schema location.
</p>
        </div>
      </div>

      <div id="method-M000019" class="method-detail">
        <a name="M000019"></a>

        <div class="method-heading">
          <a href="WAX.src/M000019.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000019.html');return false;">
          <span class="method-name">nl_text</span><span class="method-args">(text)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes <a href="WAX.html#M000026">text</a> preceded by a newline.
</p>
        </div>
      </div>

      <div id="method-M000020" class="method-detail">
        <a name="M000020"></a>

        <div class="method-heading">
          <a href="WAX.src/M000020.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000020.html');return false;">
          <span class="method-name">no_indents_or_crs</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Don&#8216;t output indent output or <a href="WAX.html#M000001">write</a>
carriage returns. Write <a href="WAX.html#M000021">out</a> the XML on a
single line.
</p>
        </div>
      </div>

      <div id="method-M000021" class="method-detail">
        <a name="M000021"></a>

        <div class="method-heading">
          <a href="WAX.src/M000021.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000021.html');return false;">
          <span class="method-name">out</span><span class="method-args">(data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes the to_s value of an <a href="Object.html">Object</a> to the writer.
</p>
        </div>
      </div>

      <div id="method-M000022" class="method-detail">
        <a name="M000022"></a>

        <div class="method-heading">
          <a href="WAX.src/M000022.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000022.html');return false;">
          <span class="method-name">processing_instruction</span><span class="method-args">(target, data)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes a processing instruction.
</p>
        </div>
      </div>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="WAX.src/M000023.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000023.html');return false;">
          <span class="method-name">set_indent</span><span class="method-args">(indent)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Sets the indentation characters to use. The only valid values are a single
tab, one or more spaces, an empty string, or nil. Passing &quot;&quot;
causes elements to be output on separate lines, but not indented. Passing
nil causes all output to be on a single line.
</p>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="WAX.src/M000024.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000024.html');return false;">
          <span class="method-name">set_trust_me</span><span class="method-args">(trust_me)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gets whether &quot;trust me&quot; mode is enabled. When disabled (the
default), proper order of method calls is verified, method parameter values
are verified, element and attribute names are verified to be NMTokens, and
reserved characters in element/attribute <a
href="WAX.html#M000026">text</a> are replaced by built-in entity
references. The main reason to enable &quot;trust me&quot; mode is for
performance which is typically good even when disabled.
</p>
        </div>
      </div>

      <div id="method-M000025" class="method-detail">
        <a name="M000025"></a>

        <div class="method-heading">
          <a href="WAX.src/M000025.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000025.html');return false;">
          <span class="method-name">start</span><span class="method-args">(p1, p2=nil)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes the <a href="WAX.html#M000025">start</a> tag for a given element
name, but doesn&#8216;t terminate it. If one parameter is specified, it is
the element name. If two parameters are specified, they are prefix and
name.
</p>
        </div>
      </div>

      <div id="method-M000026" class="method-detail">
        <a name="M000026"></a>

        <div class="method-heading">
          <a href="WAX.src/M000026.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000026.html');return false;">
          <span class="method-name">text</span><span class="method-args">(obj, newline=false, escape=@check_me)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes <a href="WAX.html#M000026">text</a> inside the content of the
current element.
</p>
        </div>
      </div>

      <div id="method-M000027" class="method-detail">
        <a name="M000027"></a>

        <div class="method-heading">
          <a href="WAX.src/M000027.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000027.html');return false;">
          <span class="method-name">use_non_windows_cr</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Uses #{@cr} for carriage returns which is appropriate on every platform
except Windows. Note that this is the default.
</p>
        </div>
      </div>

      <div id="method-M000028" class="method-detail">
        <a name="M000028"></a>

        <div class="method-heading">
          <a href="WAX.src/M000028.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000028.html');return false;">
          <span class="method-name">use_windows_cr</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Uses \r#{@cr} for carriage returns which is appropriate only on the Windows
platform. Note that this is not the default.
</p>
        </div>
      </div>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="WAX.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000002.html');return false;">
          <span class="method-name">write</span><span class="method-args">(writer=$stdout, version=nil, &amp;proc)</span>
          </a>
        </div>
      
        <div class="method-description">
        </div>
      </div>

      <div id="method-M000029" class="method-detail">
        <a name="M000029"></a>

        <div class="method-heading">
          <a href="WAX.src/M000029.html" target="Code" class="method-signature"
            onclick="popupCode('WAX.src/M000029.html');return false;">
          <span class="method-name">xslt</span><span class="method-args">(file_path)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Writes an &quot;xml-stylesheet&quot; processing instruction.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>